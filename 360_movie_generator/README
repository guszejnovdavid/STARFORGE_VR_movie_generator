This pipeline is set up to generate a movie with equirectangular mapping from 6 directional cubemap images generated by Crunchsnap. In short: this pipeline makes 360Â°/VR movies, see https://youtu.be/8nCW7419FyU for an example.

Requirements:
    -CrunchSnaps (https://github.com/mikegrudic/CrunchSnaps)
    -Blender (https://www.blender.org/download/release/Blender3.2/blender-3.2.1-linux-x64.tar.xz/), added to PATH
    -spatial-media Python package, used by the metadata injector. It requires Python 2 so install as "git clone https://github.com/google/spatial-media.git" then install for Python2 as "python2 setup.py install --user". Alternatively you can inject manually, see https://github.com/google/spatial-media for details)
    -ffmpeg (https://ffmpeg.org/download.html, note that it is not trivial to install on TACC)

Steps:
1) Run the Crunchsnap rendering in the parent directory
2) Run rename_files_for_blender.sh (for large number of files better to queue up submit_file_copy.sh)
3) Have Blender stich the 6 cubemap images for each frame into an equirectangular. Do this by queueing up the submit_blender_run_X.sh files. Each of those stitches 4000 frames, so queue up as many as you need. If you have >24k images, you need to create new blender files to process those (see below)
4) Queue up submit_make_movie.sh which will use ffmpeg to render the final movie from the sticthed frames and then inject the required metadata.

Editing Blender files:
Each Blender file is set to render 4000 frames. In case you want to change them here is what you need to do:
1) Open in Blender, on the right find the "Output Properties" tab and set "Frame Range" (This sets the numbering of output and input files)
2) For *each* cubemap direction select the Collection in top right then choose the "Material Properties" tab. Under "Surface/Emission" you can set the filename format (by specify the name of the file from which you sticth the first frame) and set the numbering like in "Output Properties" (see existing files for how to exactly set the numbers)